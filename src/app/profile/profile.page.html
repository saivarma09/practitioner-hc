<ion-header [translucent]="true">
  <ion-toolbar>
    <div class="ion-display-flex align-center gap-0-75 fs-4" (click)="goBack()">
      <i class="fa-light fa-chevron-left"></i>
      <div>Patient details</div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div>
    <section class="ion-display-flex flex-column gap-1 ion-padding pt-2  align-center">
      <div class="profile-icon position-relative" (click)="editProfile()">
        @if(selectedAvatar && selectedAvatar !== 'none') {
        <img [src]="'assets/icon/avatar/' + selectedAvatar + '.svg'">}
        @else {
            <div class="background-avatar-selected ion-display-flex align-center justify-center">
            <i class="fa-light fa-user fs-50"></i>
       
          </div>
        }
        <i class="fa-light edit-profile fa-pen"></i>
      </div>
    </section>
    <section class="ion-padding ion-display-flex flex-column gap-1">
      <div class="ion-display-flex flex-column gap-1">
        <div class="fs-4">Personal Details</div>
        <div class="ion-display-flex justify-between fs-3 px-1">
          <div class="secondary-text">Title</div>
          <div>{{patientDetails?.title || ''}}</div>
        </div>
        <div class="ion-display-flex justify-between fs-3 px-1">
          <div class="secondary-text">First Name</div>
          <div>{{patientDetails?.firstName || ''}}</div>
        </div>
        <div class="ion-display-flex justify-between fs-3 px-1">
          <div class="secondary-text">Last Name</div>
          <div>{{patientDetails?.lastName || ''}}</div>
        </div>
        <div class="ion-display-flex justify-between fs-3 px-1">
          <div class="secondary-text">Email</div>
          <div>{{patientDetails?.loginEmailAddress || '--'}}</div>
        </div>
        <div class="ion-display-flex justify-between fs-3 px-1">
          <div class="secondary-text">Status</div>
          <div>{{patientDetails?.status || '--'}}</div>
        </div>
      </div>
      <div>
        <div class="fs-4">Site Details</div>
        <div class="hidden-border">
        @for(site of patientDetails?.sites; track site){
        <div class="ion-padding border-bottom ion-display-flex flex-column gap-1">
          <!-- <div class="ion-display-flex justify-between fs-3"> -->
            <!-- <div class="secondary-text">Site id</div> -->

            <div class="ion-display-flex gap-0-25 align-center">{{site?.siteId || '--'}}@if(patientDetails?.homesite?.id === site?.siteId){<i class="fa-solid fs-1 fa-house-blank"></i>}</div>
          <!-- </div> -->
          <!-- <div class="ion-display-flex justify-between fs-3"> -->
            <!-- <div class="secondary-text">Site name</div> -->
            <div class="secondary-text">{{site?.siteName || '--'}}</div>
          <!-- </div> -->
        </div>
        }</div>
      </div>
    </section>
  </div>
</ion-content>





  <ion-modal #avatarSelectedModal [initialBreakpoint]="0.7">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <div class="ion-display-flex align-center gap-0-75 fs-4">
            <div class="flex-1">Select avatar</div>
            <i class="fa-thin fa-xmark" (click)="avatarSelectedModal.dismiss()"></i>
          </div>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <div class="ion-display-flex flex-wrap gap-2">
          <div class="background-avatar position-relative w-25 ion-display-flex align-center justify-center" [ngClass]="selectedAvatar === 'none' ? 'active':''" (click)="avatarSelected('none')">
            <i class="fa-light fa-user fs-50"></i>
            <i class="fa-solid fa-circle-check"></i>
          </div>
          @for(avatarImg of avatar; track $index){

          <div class="background-avatar w-25 h-25 position-relative" (click)="avatarSelected(avatarImg.title)" [ngClass]="selectedAvatar === avatarImg.title ? 'active':''">
            <img [src]="'assets/icon/avatar/' + avatarImg.title + '.svg'">
            <i class="fa-solid fa-circle-check"></i>
          </div>
          }
          
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>