@if(showNotesSkeletons){
<div class="ion-padding ion-display-flex flex-column gap-2 main-container">
  @for(notes of patientNotesLoaders; track $index; let last = $last) {
  <div class="ion-display-flex align-center gap-1">
    <div class="position-relative">
      <div [ngClass]="{'notes-icon': !last}">
        <ion-skeleton-text animated style="width: 20px; height: 20px; border-radius: 50%;"></ion-skeleton-text>
      </div>
    </div>
    <div class="ion-display-flex flex-column gap-0-25 flex-1">
      <ion-skeleton-text animated style="width: 70%; height: 14px;"></ion-skeleton-text>
      <ion-skeleton-text animated style="width: 40%; height: 12px;"></ion-skeleton-text>
    </div>
    <div>
    </div>
  </div>
  }
</div>}
@else{
  @if(patientClinicalNotes.length > 0){
<div class="ion-padding ion-display-flex flex-column gap-2 main-container">
  @for(notes of patientClinicalNotes; track notes.id; let last = $last) {
  <div class="ion-display-flex align-center gap-1" (click)="openClinicalNotesModal(notes)">
    <div class="position-relative">
      <div [ngClass]="{'notes-icon': !last}">
        <i class="fa-light fa-notes-medical fs-6"></i>
      </div>
    </div>
    <div class="ion-display-flex flex-column gap-0-25 flex-1">
      <div>{{ notes.description }}</div>
      <div class="secondary-text">{{ notes.createdOn | date: 'short' }}</div>
    </div>
    <div>
      <i class="fa-light fa-chevron-right fs-5"></i>
    </div>
  </div>
  }
</div>
  }
  @else{
    <app-no-records message="No clinical notes found"></app-no-records>
  }
}

<ion-modal #clinicalNotesModal [initialBreakpoint]="0.5">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <div class="ion-display-flex align-center gap-0-75 fs-4">
          <div class="flex-1">{{selectedNotes.description}}</div>
          <i class="fa-thin fa-xmark" (click)="clinicalNotesModal.dismiss()"></i>
        </div>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding" [scrollY]="true">
      <div [innerHTML]="selectedNotes.notes"></div>
    </ion-content>
  </ng-template>
</ion-modal>